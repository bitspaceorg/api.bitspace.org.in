generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model year {
  id        Int        @id
  timelines timeline[]
}

model timeline {
  id      Int      @id @default(autoincrement())
  title   String
  content String[]
  date    DateTime
  year_id  Int
  year    year     @relation(fields: [year_id], references: [id])
}

model message {
    id       Int    @id @default(autoincrement())
    content  String
    parent_id Int?
    name     String
    image    String
}

model Users{
    id String @id @default(cuid())
    username   String    @unique
    Rank Rank @relation(fields: [rank],references: [rank])
    rank Int
    Role Role_user[]
    is_ban Boolean @default(false)
    title String
    is_joined_discord Boolean
    created_at DateTime? @default(now()) @db.Timestamptz(6)
    discord_id String?
    github_id  String
    strike     Int       @default(0) @db.SmallInt
    points     Int?      @default(0)
}

model Role{
    role String @id
    users Role_user[]
}

model Role_user{
    Roles Role @relation(fields: [role],references: [role])
    role String
    User Users @relation(fields: [username],references: [username])
    username String
    @@id([role,username])
}

model Rank{
    rank Int @id
    Users Users[]
    is_mod Boolean
    is_super_mod Boolean
}
